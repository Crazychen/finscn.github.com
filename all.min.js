var Config={width:900,height:500};(function(f,m){var p,g,l=(+new Date),n=(+new Date),h=Date.now(),d=55,i=1000/d,a=(new Date).getTime(),k=0,s;function o(t,w,v,x){if(arguments.length===3){x=v;
v=w;w=m;}var u=function(y){var y=y||f.event;x.call(t,y);};if(w.attachEvent){w.attachEvent("on"+v,u);}else{w.addEventListener(v,u,false);}}function r(t,u){this.x=t;
this.y=u;}function e(t,z,u,v){this.x=t;this.y=z;this.w=u;this.h=v;}function q(v){var t={};for(var u in v){t[u]=v[u];}return t;}function j(u){u=q(u);var t;
if(u.type=="mousedown"||u.type=="touchstart"){t="Down";}else{if(u.type=="mouseup"||u.type=="touchend"){t="Up";}else{t="Click";}}u.point=new r(u.clientX-s.x+m.body.scrollLeft+m.documentElement.scrollLeft,u.clientY-s.y+m.body.scrollTop+m.documentElement.scrollTop);
c._input(t,u);}function b(t){t=q(t);c._input(t.type,t);}var c={_cb:{tick:[],render:[],input:[]},extend:function(u){for(var t in u){if(!u.hasOwnProperty(t)){continue;
}this[t]=u[t];}},start:function(u){this._canvas=u;this._ctx=u.getContext("2d");this.width=u.width;this.height=u.height;var t=null;if(t){p=function(){c.step();
g=t(p);};p();}else{p=setInterval(function(){c.step();},1000/d);}o(this,u,"touchend",j);o(this,u,"mouseup",j);o(this,f,"resize",function(){s=c.DOM.inner(u);
});s=c.DOM.inner(u);},step:function(){var t=0;var u=Date.now()-h;h=Date.now();c._tick(u,k++);c._render(this._ctx);},stop:function(){},_tick:function(w,x){var u=this._cb.tick,v=0,t=u.length;
for(;v<t;++v){u[v](w,x);}},tick:function(t){this._cb.tick.push(t);},_render:function(u){var v=this._cb.render,w=0,t=v.length;for(;w<t;++w){v[w](u);}},render:function(t){this._cb.render.push(t);
},_input:function(w,x){var u=this._cb.input,v=0,t=u.length;for(;v<t;++v){u[v](w,x);}},input:function(t){this._cb.input.push(t);}};c.extend({DOM:{inner:function(z){var w=z.getBoundingClientRect(),t=w.left+(f.pageXOffset?f.pageXOffset:m.body.scrollTop),A=w.top+(f.pageYOffset?f.pageYOffset:m.body.scrollLeft),v=parseInt(this.getStyle(z,"border-left-width")||0,10)||parseInt(this.getStyle(z,"borderLeftWidth")||0,10)||0,u=parseInt(this.getStyle(z,"border-top-width")||0,10)||parseInt(this.getStyle(z,"borderTopWidth")||0,10)||0;
t+=v;A+=u;return{x:t,y:A};},getStyle:function(u,v){var t;if(u.currentStyle){t=u.currentStyle[this.camelize(v)];}else{if(f.getComputedStyle){t=m.defaultView.getComputedStyle(u,null).getPropertyValue(this.csselize(v));
}}return t;},camelize:function(t){return t.replace(/-+(.)?/g,function(u,v){return v?v.toUpperCase():"";});},csselize:function(t){return t.replace(/[A-Z]/g,function(u){return u?"-"+u.toLowerCase():"";
});}}});f.Game=c;}(window,window.document));(function(){var e=[[,,9,9,9,9,9,,,,,,,9,9,9,9,9,,,,,,,,9,9,,,,,9,9,9,9,9,,],[,9,9,9,9,9,9,9,,,,,9,9,9,9,9,9,9,,,,,,9,9,9,,,,9,9,9,9,9,9,9,],[9,9,9,,,,9,9,9,,,9,9,9,,,,9,9,9,,,,9,9,9,9,,,9,9,9,,,,9,9,9],[9,9,,,,,,9,9,,,9,9,,,,,,9,9,,,9,9,9,9,9,,,9,9,,,,,,9,9],[,,,,,,,9,9,,,9,9,,,,,,9,9,,,,,,9,9,,,,,,,,,,9,9],[,,,,,,9,9,9,,,9,9,,,,,,9,9,,,,,,9,9,,,,,,,,,9,9,9],[,,,,,9,9,9,,,,9,9,,,,,,9,9,,,,,,9,9,,,,,,,,9,9,9,],[,,,,9,9,9,,,,,9,9,,,,,,9,9,,,,,,9,9,,,,,,,9,9,9,,],[,,,9,9,9,,,,,,9,9,,,,,,9,9,,,,,,9,9,,,,,,9,9,9,,,],[,,9,9,9,,,,,,,9,9,,,,,,9,9,,,,,,9,9,,,,,9,9,9,,,,],[,9,9,9,,,,,,,,9,9,,,,,,9,9,,,,,,9,9,,,,9,9,9,,,,,],[9,9,9,,,,,,,,,9,9,9,,,,9,9,9,,,,,,9,9,,,9,9,9,,,,,,],[9,9,9,9,9,9,9,9,9,,,,9,9,9,9,9,9,9,,,,,,,9,9,,,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,,,,,9,9,9,9,9,,,,,,,,9,9,,,9,9,9,9,9,9,9,9,9],];
var b=[[9,9,9,9,9,9,9,9,,,,,9,9,,,,,,,,,9,9,,,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,,,,9,9,9,,,,,,,9,9,9,,,9,9,9,9,9,9,9,9,9,9],[9,9,,,,,,9,9,9,,,,9,9,9,,,,,9,9,9,,,,9,9,,,,,,,,],[9,9,,,,,,,9,9,,,,,9,9,9,,,9,9,9,,,,,9,9,,,,,,,,],[9,9,,,,,,,9,9,,,,,,9,9,9,9,9,9,,,,,,9,9,,,,,,,,],[9,9,,,,,,9,9,,,,,,,,9,9,9,9,,,,,,,9,9,,,,,,,,],[9,9,9,9,9,9,9,9,,,,,,,,,,9,9,,,,,,,,9,9,9,9,9,9,9,9,9,],[9,9,9,9,9,9,9,9,9,,,,,,,,,9,9,,,,,,,,9,9,9,9,9,9,9,9,9,],[9,9,,,,,,9,9,9,,,,,,,,9,9,,,,,,,,9,9,,,,,,,,],[9,9,,,,,,,9,9,,,,,,,,9,9,,,,,,,,9,9,,,,,,,,],[9,9,,,,,,,9,9,,,,,,,,9,9,,,,,,,,9,9,,,,,,,,],[9,9,,,,,,9,9,9,,,,,,,,9,9,,,,,,,,9,9,,,,,,,,],[9,9,9,9,9,9,9,9,9,,,,,,,,,9,9,,,,,,,,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,,,,,,,,,,9,9,,,,,,,,9,9,9,9,9,9,9,9,9,9],];
var d=[[,,9,9,9,9,9,,,,,,,9,9,9,9,9,,,,,,,,9,9,,,,9,9,9,9,9,9,,],[,9,9,9,9,9,9,9,,,,,9,9,9,9,9,9,9,,,,,,9,9,9,,,9,9,9,9,9,9,9,9,],[9,9,9,,,,9,9,9,,,9,9,9,,,,9,9,9,,,,9,9,9,9,,,9,9,,,,,9,9,9],[9,9,,,,,,9,9,,,9,9,,,,,,9,9,,,9,9,9,9,9,,,,,,,,,,9,9],[,,,,,,,9,9,,,9,9,,,,,,9,9,,,,,,9,9,,,,,,,,,9,9,9],[,,,,,,9,9,9,,,9,9,,,,,,9,9,,,,,,9,9,,,,,,,,9,9,9,],[,,,,,9,9,9,,,,9,9,,,,,,9,9,,,,,,9,9,,,,,9,9,9,9,9,,],[,,,,9,9,9,,,,,9,9,,,,,,9,9,,,,,,9,9,,,,,9,9,9,9,9,,],[,,,9,9,9,,,,,,9,9,,,,,,9,9,,,,,,9,9,,,,,,,,9,9,9,],[,,9,9,9,,,,,,,9,9,,,,,,9,9,,,,,,9,9,,,,,,,,,9,9,9],[,9,9,9,,,,,,,,9,9,,,,,,9,9,,,,,,9,9,,,,,,,,,,9,9],[9,9,9,,,,,,,,,9,9,9,,,,9,9,9,,,,,,9,9,,,9,9,,,,,9,9,9],[9,9,9,9,9,9,9,9,9,,,,9,9,9,9,9,9,9,,,,,,,9,9,,,9,9,9,9,9,9,9,9,],[9,9,9,9,9,9,9,9,9,,,,,9,9,9,9,9,,,,,,,,9,9,,,,9,9,9,9,9,9,,],];
var a=[[9,9,,,,,,,9,9,,,9,9,9,9,9,9],[9,9,,,,,,,9,9,,,9,9,9,9,9,9],[9,9,,,,,,,9,9,,,,,9,9,,],[9,9,,,,,,,9,9,,,,,9,9,,],[9,9,,,,,,,9,9,,,,,9,9,,],[9,9,,,,,,,9,9,,,,,9,9,,],[9,9,9,9,9,9,9,9,9,9,,,,,9,9,,],[9,9,9,9,9,9,9,9,9,9,,,,,9,9,,],[9,9,,,,,,,9,9,,,,,9,9,,],[9,9,,,,,,,9,9,,,,,9,9,,],[9,9,,,,,,,9,9,,,,,9,9,,],[9,9,,,,,,,9,9,,,,,9,9,,],[9,9,,,,,,,9,9,,,9,9,9,9,9,9],[9,9,,,,,,,9,9,,,9,9,9,9,9,9],];
function c(f){for(var g in f){this[g]=f[g];}this.init();}c.prototype={space:10,data:null,init:function(){this.nodes=[];this.createNodes(e,50,50);this.createNodes(b,480,80);
this.createNodes(d,50+60,50+240);this.createNodes(a,480+60,70+240);this.fullNodes=[];},createNodes:function(i,g,f){var h=this;i.forEach(function(k,j){k.forEach(function(l,m){if(l===9){h.nodes.push({x:h.space*m+g,y:h.space*j+f,f:0});
}});});},update:function(h){for(var f=this.nodes.length-1;f>=0;f--){var g=this.nodes[f];if(g.f){this.fullNodes.push(g);this.nodes.splice(f,1);}}},render:function(f){}};
window.Map=c;}());(function(){function a(b){for(var c in b){this[c]=b[c];}this.size+=randomInt(-2,2);}a.prototype={color:null,rotation:0,vr:0.001,size:18,x:0,y:0,v:0,vx:0,vy:0,tx:null,ty:null,findTarget:function(h){var e=h.nodes;
if(!e.length){this.disabled=true;return;}var f=randomInt(0,e.length-1);var g=e[f];this.tx=g.x+randomInt(-2,2);this.ty=g.y+randomInt(-2,2);g.f++;this.v=randomInt(1,2)/16;
var d=this.tx-this.x;var c=this.ty-this.y;var b=Math.atan2(c,d);this.cos=Math.cos(b);this.sin=Math.sin(b);this.vx=this.v*this.cos;this.vy=this.v*this.sin;
},update:function(f){if(this.disabled){return;}if(this.tx===null||this.ty===null){this.findTarget(map);}else{var d=this.vx*f;var c=this.vy*f;var h=Math.abs(this.tx-this.x);
var b=Math.abs(this.ty-this.y);var e=Math.abs(d);var g=Math.abs(c);if(h<e){d=0;}if(b<g){c=0;}this.x=this.x+d;this.y=this.y+c;this.rotation+=this.vr*f;if(d===0&&c===0){this.finished=true;
this.vx=0;this.vy=0;}}},render:function(b){if(this.disabled){return;}b.save();b.translate(this.x,this.y);b.rotate(this.rotation);b.fillStyle=this.color;
var c=this.size;b.fillRect(-c>>1,-c>>1,c,c);b.restore();}};window.Sprite=a;}());var point=null;var sprites=[];var map;function start(){var a=document.getElementById("canvas");
a.width=Config.width;a.height=Config.height;map=new Map();Game.start(a);Game.tick(function(b,c){map.update(b);sprites.forEach(function(d){d.update(b);});
});Game.render(function(b){b.fillStyle="#441166";b.globalAlpha=0.1;b.fillRect(0,0,Config.width,Config.height);map.render(b);b.globalAlpha=0.8;sprites.forEach(function(c){c.render(b);
});});Game.input(function(c,d){if(c=="Up"){var b=d.point;createSprites(b.x,b.y,16);}});}function createSprites(a,f,e){var b=["#ff2211","#ff9911","#ffff11","#11ff11","#11ffff","#1122ff","#ff33ff",];
e=e||1;for(var d=0;d<e;d++){var c=new Sprite({x:a+randomInt(-5,5),y:f+randomInt(-5,5),color:b[randomInt(0,6)]});sprites.push(c);}}function randomInt(b,a){return((a-b+1)*Math.random()+b)>>0;
}